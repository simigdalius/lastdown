[gd_scene load_steps=15 format=3 uid="uid://cnoktiruuwenx"]

[ext_resource type="Script" path="res://scripts/enemy_spawner.gd" id="1_gix50"]
[ext_resource type="PackedScene" uid="uid://nqtqjc8uspdc" path="res://prefabs/enemy.tscn" id="2_jabvq"]
[ext_resource type="Script" path="res://scripts/spring_arm_3d.gd" id="3_tnbnj"]
[ext_resource type="Script" path="res://scripts/camera_3d.gd" id="4_4c3aj"]
[ext_resource type="PackedScene" uid="uid://dqwo5212gq02k" path="res://scenes/player.tscn" id="5_uf8mj"]
[ext_resource type="Script" path="res://scripts/weapon.gd" id="6_6ahi0"]
[ext_resource type="PackedScene" uid="uid://dufp77sdephg8" path="res://prefabs/bullet.tscn" id="7_xgi2s"]

[sub_resource type="NavigationMesh" id="NavigationMesh_ec1s1"]
vertices = PackedVector3Array(-24.5, 1, -24.5, -24.5, 1, 24.5, 24.5, 1, 24.5, 24.5, 1, -24.5)
polygons = [PackedInt32Array(3, 2, 0), PackedInt32Array(0, 2, 1)]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_majq4"]
albedo_color = Color(0.652715, 0.355336, 0.222247, 1)

[sub_resource type="BoxMesh" id="BoxMesh_fir8g"]
material = SubResource("StandardMaterial3D_majq4")

[sub_resource type="BoxShape3D" id="BoxShape3D_p0r55"]

[sub_resource type="BoxMesh" id="BoxMesh_imupi"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_dd53r"]
transparency = 1
albedo_color = Color(1, 0, 0, 1)
emission_enabled = true
emission = Color(4.13924e-06, 0.750768, 0.645654, 1)

[sub_resource type="QuadMesh" id="QuadMesh_318c6"]
material = SubResource("StandardMaterial3D_dd53r")

[node name="bookmap" type="Node3D"]

[node name="mapEnemy" type="Node3D" parent="."]

[node name="NavigationRegion3D" type="NavigationRegion3D" parent="mapEnemy"]
navigation_mesh = SubResource("NavigationMesh_ec1s1")

[node name="floor" type="MeshInstance3D" parent="mapEnemy/NavigationRegion3D"]
transform = Transform3D(50, 0, 0, 0, 1, 0, 0, 0, 50, 0, 0, 0)
mesh = SubResource("BoxMesh_fir8g")
skeleton = NodePath("../..")

[node name="StaticBody3D" type="StaticBody3D" parent="mapEnemy/NavigationRegion3D/floor"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="mapEnemy/NavigationRegion3D/floor/StaticBody3D"]
shape = SubResource("BoxShape3D_p0r55")

[node name="EnemySpawner" type="Node3D" parent="mapEnemy" node_paths=PackedStringArray("root_node")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.68714, 0)
script = ExtResource("1_gix50")
enemy_prefab = ExtResource("2_jabvq")
root_node = NodePath("")
spawn_rate = 0.9

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(1, 0, 0, 0, -0.0505929, 0.998719, 0, -0.998719, -0.0505929, 17.6707, 13.5909, 0.814781)

[node name="SpringArm3D" type="SpringArm3D" parent="." node_paths=PackedStringArray("player")]
transform = Transform3D(0.866025, 0.353553, 0.353553, 0, 0.707107, -0.707107, -0.5, 0.612372, 0.612372, 0, 12.7, -11.1791)
spring_length = -15.0
script = ExtResource("3_tnbnj")
player = NodePath("../player")

[node name="Camera3D" type="Camera3D" parent="SpringArm3D" groups=["camera"]]
transform = Transform3D(-1, 0, -8.74228e-08, 0, 1, 0, 8.74228e-08, 0, -1, 0, 0, 0)
script = ExtResource("4_4c3aj")
max_shake = 0.15
shake_fallof = 5.0

[node name="player" parent="." node_paths=PackedStringArray("camera") instance=ExtResource("5_uf8mj")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -22.2115, 1.99412, 2.75337)
camera = NodePath("../SpringArm3D/Camera3D")

[node name="weapon" type="Node3D" parent="player" node_paths=PackedStringArray("root_node", "shoot_position")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -1.39142)
script = ExtResource("6_6ahi0")
bullet_prefab = ExtResource("7_xgi2s")
root_node = NodePath("")
shoot_position = NodePath("shootPosition")
shoot_rate = 0.05

[node name="MeshInstance3D" type="MeshInstance3D" parent="player/weapon"]
transform = Transform3D(0.1, 0, 0, 0, 0.1, 0, 0, 0, -1, -0.118352, 0, 0.646996)
mesh = SubResource("BoxMesh_imupi")

[node name="shootPosition" type="Node3D" parent="player/weapon"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.126122, 0.0961877, 0)

[node name="muzzleFlash" type="Node3D" parent="player/weapon"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.126122, 0.0961877, 0)
visible = false

[node name="OmniLight3D" type="OmniLight3D" parent="player/weapon/muzzleFlash"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.00449771, -0.0961877, 0.184793)
light_color = Color(0.911089, 0.843765, 0.455562, 1)
light_energy = 1.5
omni_range = 1.93566

[node name="MeshInstance3D" type="MeshInstance3D" parent="player/weapon/muzzleFlash"]
transform = Transform3D(-1.31134e-08, 0, 0.1, 0, 0.1, 0, -0.3, 0, -4.37114e-09, 0, -0.102474, -0.0056293)
mesh = SubResource("QuadMesh_318c6")

[node name="Timer" type="Timer" parent="player/weapon/muzzleFlash"]
